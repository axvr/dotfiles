#!/usr/bin/env -S execlineb -W

# List TODOs and other comment tags in specified files or a git repo.

backtick -ED "" git_files*
{
    importas -Si \#
    if { test $# -eq 0 } git ls-files
}

multisubstitute
{
    elgetpositionals
    define regex "\\b\\(TO[-_ ]\\?DO\\|FIX[-_ ]\\?ME\\|XXX\\|BUG\\|HACK\\)\\b"
    define -s git_files $git_files*
}

grep -nsH --color=auto $regex -- . $@ $git_files
